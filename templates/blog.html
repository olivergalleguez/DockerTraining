<html>
<head>
	<title>
		My First Blog
	</title>
	{% block headCss %}
		<link rel="stylesheet" href="{{ url_for('static', filename='stylesheets/base.css')}}" type="text/css">
	{% endblock %}
</head>
	<body class="body">
		<h2>Welcome to your blog</h2>
		<form class="form-border" action="/add_post" method="POST" id="add-form">
			<h4>New Post</h4>
			<div class="title wrapper">
				<input id="input-title" type="text" name="title" placeholder="Title"></input>
			</div>

			<div class="title wrapper">
				<textarea id="input-post" name="post"></textarea>
			</div>
			<div  class="description wrapper">
				<input type="submit" id="input-submit" value="POST"></input>
			</div>
		</form>

		<form class="form-border" action="/post" method="PUT" id="edit-form">
			<h4>Edit Entry</h4>
			<input type="hidden" name="id" />
			<div class="title wrapper">
				<input id="input-title" type="text" name="title" placeholder="Title"></input>
			</div>

			<div class="title wrapper">
				<textarea id="input-post" name="post"></textarea>
			</div>
			<div  class="description wrapper">
				<input type="submit" id="input-submit" value="POST"></input>
			</div>
		</form>

		{% for post in posts %}
			<div class="blog-border">
				<div class="title">
					<div>{{ post.title }}</div>
				</div>
				<div class="post">
					<div> {{ post.post }} </div>
				</div>
				<div>
					<button onclick="editPostForm('{{ post._id }}')">Edit</button>
				</div>
		  	</div>
		{% endfor %}

		<script>
			var editPostForm = function(id){
				var url = "/posts/" + id;
				var request = new XMLHttpRequest();
				request.onreadystatechange = function(){
					if (request.readyState === XMLHttpRequest.DONE) {
						if (request.status === 200) {
						var response = JSON.parse(request.responseText);
						console.log("RESPONSE FROM AJAX", response);
						} else {
						alert('There was a problem with the request.');
						}
					}
				}
				request.open("GET", url, true);
				request.send();
			}

			document.addEventListener("DOMContentLoaded", function(event) {
				
			});
		</script>
	
	</body>

</html>





